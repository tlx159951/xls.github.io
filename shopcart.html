<!doctype html>
<html class="no-js bg-f2">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="viewport"
        content="width=device-width, initial-scale=1">
  <title>小螺丝</title>

  <!-- Set render engine for 360 browser -->
  <meta name="renderer" content="webkit">

  <!-- No Baidu Siteapp-->
  <meta http-equiv="Cache-Control" content="no-siteapp"/>


  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">


  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Amaze UI"/>


  <!-- Tile icon for Win8 (144x144 + tile color) -->

  <meta name="msapplication-TileColor" content="#0e90d2">
  <link rel="stylesheet" href="css/amazeui.min.css">
  <link rel="stylesheet" href="css/idangerous.swiper.css">
  <link rel="stylesheet" href="css/weui.min.css">
  <link rel="stylesheet" href="css/app.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/amazeui.min.js"></script>
  <script src="js/idangerous.swiper.min.js"></script>
  <script>
  var i=0;
  var iPrice=0;
  $(function(){
     $('.checkbox').each(function(){
       $(this).on('click',addPrice);
     });

     $('.countred').each(function(indexred){
       $(this).on('click',function(){
        if($('.count').eq(indexred).html()>1)
        {
          $('.count').eq(indexred).html($('.count').eq(indexred).html()-1);
        }
        addPrice();
       })
     });

     $('.countadd').each(function(indexadd){
       $(this).on('click',function(){
        $('.count').eq(indexadd).html(parseFloat($('.count').eq(indexadd).html())+1);
        addPrice();
       })
     });

     $('.checkboxall').on('click',function(){
      $('.checkbox').prop('checked',true);
      addPrice();
     });

     $('.delete').each(function(indexdel){
      $(this).on('click',function(){
        $('.weui_dialog_confirm').removeClass('weui_dialog_confirm_hide');
        $('.weui_dialog_confirm .confirm').on('click',function(){
          $('.weui_dialog_confirm').addClass('weui_dialog_confirm_hide');
          $('.shopcart-list').eq(indexdel).remove();
          addPrice();
        });
        $('.weui_dialog_confirm .cancel').on('click',function(){
          $('.weui_dialog_confirm').addClass('weui_dialog_confirm_hide');
          $('.weui_dialog_confirm .confirm').off();
        });
      })
     });
    
     
     addPrice();
  })
  
  

  function addPrice(){
    i=0;
    iPrice=0;
    $('.priceli').each(function(index){
      if($('.checkbox').eq(index).prop('checked'))
      {
        i++; 
        iPrice +=parseFloat($(this).html())*parseFloat($('.count').eq(index).html());
      }
      else{
        $('.checkboxall').prop('checked',false);
      }
    })
    if(i==$('.checkbox').length){
      $('.checkboxall').prop('checked',true);
    }
    $('.priceaddall').html('合计：￥'+iPrice+'（不含运费)');
  } 
  </script>
</head>
<body>
<!-- 导航栏 -->
<div class="am-g fam-nav"> 
  <a href="me.html"><返回</a>
  <h2>商品详情</h2>  
</div>
<!-- 导航栏 -->

<!-- 预约项目 -->
<div class="am-g shopcart-list">
  <input type="checkbox" class="checkbox" checked="checked">
  <img src="" alt="">
  <div class="font">
    <h1>商品名称</h1>
    <p>规格： 13*16</p>
    <p>款式：高</p>
    <p>颜色：黄</p>
    <p class="countsel">数量：<span class="countred">-</span><span class="count">1</span><span class="countadd">+</span></p>
  </div>
  <h2 class="price">￥<p class="priceli">998</p></h2>
  <a href="javascrpit:" class="delete"><img src="images/shopcart-delete.png" alt=""></a>
</div>

<div class="am-g shopcart-list">
  <input type="checkbox" class="checkbox" checked="checked">
  <img src="" alt="">
  <div class="font">
    <h1>商品名称</h1>
    <p>规格： 13*16</p>
    <p>款式：高</p>
    <p>颜色：黄</p>
    <p class="countsel">数量：<span class="countred">-</span><span class="count">1</span><span class="countadd">+</span></p>
  </div>
  <h2 class="price">￥<p class="priceli">999</p></h2>
  <a href="javascrpit:" class="delete"><img src="images/shopcart-delete.png" alt=""></a>
</div>
<!-- 预约项目 -->

<!-- 底部导航 -->
<div class="am-g bot-tc shopcart-bottom-tc"></div>
<div class="am-g bot-nav shopcart-bottom">
  <input type="checkbox" class="checkboxall" checked="checked">&nbsp全选
  <span class="priceaddall">合计：￥10000（不含运费）</span>
  <a href="ordercheck.html">结算</a>
</div>
<!-- 底部导航 -->

<!-- 删除确认 -->
<div class="weui_dialog_confirm weui_dialog_confirm_hide" id="dialog1">
    <div class="weui_mask"></div>
    <div class="weui_dialog">
        <div class="weui_dialog_hd"><strong class="weui_dialog_title">删除商品</strong></div>
        <div class="weui_dialog_bd">您确认要从购物车中删除该商品么？</div>
        <div class="weui_dialog_ft">
             <a href="javascript:;" class="weui_btn_dialog primary confirm">确定</a>
            <a href="javascript:;" class="weui_btn_dialog default cancel">取消</a> 
        </div>
    </div>
</div>
<!-- 删除确认 -->
</body>
</html>